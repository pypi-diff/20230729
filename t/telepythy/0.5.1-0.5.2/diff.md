# Comparing `tmp/telepythy-0.5.1-py3-none-any.whl.zip` & `tmp/telepythy-0.5.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,36 +1,37 @@
-Zip file size: 91764 bytes, number of entries: 34
--rw-r--r--  2.0 unx       83 b- defN 22-Aug-22 02:59 telepythy/__init__.py
--rwxr-xr-x  2.0 unx       68 b- defN 22-Aug-16 03:11 telepythy/__main__.py
--rw-r--r--  2.0 unx     1578 b- defN 22-Aug-19 02:40 telepythy/pack.py
--rwxr-xr-x  2.0 unx    10985 b- defN 22-Aug-22 23:00 telepythy/telepythy_service.pyz
--rw-r--r--  2.0 unx     2355 b- defN 22-Aug-22 20:37 telepythy/gui/__main__.py
--rwxr-xr-x  2.0 unx     1866 b- defN 22-Aug-16 03:11 telepythy/gui/about.py
--rw-r--r--  2.0 unx     1788 b- defN 22-Aug-16 15:32 telepythy/gui/config.py
--rwxr-xr-x  2.0 unx     6875 b- defN 22-Aug-16 03:11 telepythy/gui/control.py
--rwxr-xr-x  2.0 unx     1567 b- defN 22-Aug-16 03:11 telepythy/gui/document.py
--rwxr-xr-x  2.0 unx     7379 b- defN 22-Aug-16 03:11 telepythy/gui/highlighter.py
--rwxr-xr-x  2.0 unx     1460 b- defN 22-Aug-16 03:11 telepythy/gui/history.py
--rwxr-xr-x  2.0 unx    10574 b- defN 22-Aug-16 03:11 telepythy/gui/output.py
--rwxr-xr-x  2.0 unx     1454 b- defN 22-Aug-16 03:11 telepythy/gui/profiles.py
--rw-r--r--  2.0 unx    41607 b- defN 22-Aug-22 16:18 telepythy/gui/resources_rc.py
--rw-r--r--  2.0 unx     4254 b- defN 22-Aug-16 17:32 telepythy/gui/settings.py
--rwxr-xr-x  2.0 unx     8700 b- defN 22-Aug-16 03:11 telepythy/gui/source.py
--rw-r--r--  2.0 unx     3112 b- defN 22-Aug-16 15:41 telepythy/gui/styles.py
--rwxr-xr-x  2.0 unx    84163 b- defN 22-Aug-16 03:11 telepythy/gui/syntaxhighlighters.py
--rwxr-xr-x  2.0 unx     1492 b- defN 22-Aug-16 03:11 telepythy/gui/textedit.py
--rwxr-xr-x  2.0 unx     2748 b- defN 22-Aug-16 03:11 telepythy/gui/utils.py
--rw-r--r--  2.0 unx    13375 b- defN 22-Aug-22 20:47 telepythy/gui/window.py
--rwxr-xr-x  2.0 unx     1683 b- defN 22-Aug-16 03:11 telepythy/lib/__init__.py
--rw-r--r--  2.0 unx     1626 b- defN 22-Aug-22 22:46 telepythy/lib/__main__.py
--rwxr-xr-x  2.0 unx      555 b- defN 22-Aug-16 03:11 telepythy/lib/event_handlers.py
--rwxr-xr-x  2.0 unx     6220 b- defN 22-Aug-16 03:11 telepythy/lib/interpreter.py
--rw-r--r--  2.0 unx     2281 b- defN 22-Aug-22 20:36 telepythy/lib/logs.py
--rwxr-xr-x  2.0 unx     6177 b- defN 22-Aug-16 03:11 telepythy/lib/service.py
--rwxr-xr-x  2.0 unx     4075 b- defN 22-Aug-16 03:11 telepythy/lib/sockio.py
--rw-r--r--  2.0 unx     3008 b- defN 22-Aug-16 17:36 telepythy/lib/utils.py
--rw-r--r--  2.0 unx     7789 b- defN 22-Aug-22 23:00 telepythy-0.5.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 22-Aug-22 23:00 telepythy-0.5.1.dist-info/WHEEL
--rwxr-xr-x  2.0 unx      120 b- defN 22-Aug-22 23:00 telepythy-0.5.1.dist-info/entry_points.txt
--rwxr-xr-x  2.0 unx       10 b- defN 22-Aug-22 23:00 telepythy-0.5.1.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2770 b- defN 22-Aug-22 23:00 telepythy-0.5.1.dist-info/RECORD
-34 files, 243889 bytes uncompressed, 87376 bytes compressed:  64.2%
+Zip file size: 71150 bytes, number of entries: 35
+-rw-r--r--  2.0 unx       83 b- defN 23-Jul-29 13:53 telepythy/__init__.py
+-rw-r--r--  2.0 unx       68 b- defN 22-Sep-07 14:39 telepythy/__main__.py
+-rw-r--r--  2.0 unx     1578 b- defN 22-Sep-07 14:39 telepythy/pack.py
+-rwxr-xr-x  2.0 unx    11067 b- defN 23-Jul-29 16:42 telepythy/telepythy_service.pyz
+-rw-r--r--  2.0 unx     2188 b- defN 22-Oct-09 19:22 telepythy/gui/__main__.py
+-rw-r--r--  2.0 unx     1901 b- defN 23-Jul-29 00:37 telepythy/gui/about.py
+-rw-r--r--  2.0 unx     1857 b- defN 23-Jul-29 04:26 telepythy/gui/config.py
+-rw-r--r--  2.0 unx     6883 b- defN 22-Oct-09 20:48 telepythy/gui/control.py
+-rw-r--r--  2.0 unx     1567 b- defN 22-Jun-29 20:26 telepythy/gui/document.py
+-rw-r--r--  2.0 unx     4588 b- defN 22-Oct-09 19:31 telepythy/gui/highlighter.py
+-rw-r--r--  2.0 unx     1460 b- defN 22-Jun-10 21:10 telepythy/gui/history.py
+-rw-r--r--  2.0 unx     5805 b- defN 22-Oct-09 19:22 telepythy/gui/lexer.py
+-rw-r--r--  2.0 unx    10693 b- defN 23-Jul-29 00:40 telepythy/gui/output.py
+-rw-r--r--  2.0 unx     1454 b- defN 22-Sep-07 14:39 telepythy/gui/profiles.py
+-rw-r--r--  2.0 unx    41559 b- defN 23-Jul-29 03:01 telepythy/gui/resources_rc.py
+-rw-r--r--  2.0 unx     4902 b- defN 23-Jul-29 02:11 telepythy/gui/settings.py
+-rw-r--r--  2.0 unx     8903 b- defN 23-Jul-29 00:42 telepythy/gui/source.py
+-rw-r--r--  2.0 unx     3112 b- defN 22-Sep-07 14:39 telepythy/gui/styles.py
+-rw-r--r--  2.0 unx     1487 b- defN 22-Oct-09 19:22 telepythy/gui/textedit.py
+-rw-r--r--  2.0 unx     1790 b- defN 23-Jul-29 04:06 telepythy/gui/tips.py
+-rw-r--r--  2.0 unx     2622 b- defN 23-Jul-29 04:06 telepythy/gui/utils.py
+-rw-r--r--  2.0 unx    14993 b- defN 23-Jul-29 04:07 telepythy/gui/window.py
+-rw-r--r--  2.0 unx     1683 b- defN 22-Sep-07 14:39 telepythy/lib/__init__.py
+-rw-r--r--  2.0 unx     1626 b- defN 22-Sep-07 14:39 telepythy/lib/__main__.py
+-rw-r--r--  2.0 unx      555 b- defN 22-Oct-09 19:22 telepythy/lib/event_handlers.py
+-rw-r--r--  2.0 unx     6220 b- defN 22-Jul-07 19:47 telepythy/lib/interpreter.py
+-rw-r--r--  2.0 unx     2281 b- defN 22-Sep-07 14:39 telepythy/lib/logs.py
+-rw-r--r--  2.0 unx     6366 b- defN 22-Oct-09 20:56 telepythy/lib/service.py
+-rw-r--r--  2.0 unx     4075 b- defN 22-Sep-07 14:39 telepythy/lib/sockio.py
+-rw-r--r--  2.0 unx     3008 b- defN 22-Sep-07 14:39 telepythy/lib/utils.py
+-rw-r--r--  2.0 unx     7912 b- defN 23-Jul-29 16:42 telepythy-0.5.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-29 16:42 telepythy-0.5.2.dist-info/WHEEL
+-rw-rw-r--  2.0 unx      119 b- defN 23-Jul-29 16:42 telepythy-0.5.2.dist-info/entry_points.txt
+-rw-rw-r--  2.0 unx       10 b- defN 23-Jul-29 16:42 telepythy-0.5.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2834 b- defN 23-Jul-29 16:42 telepythy-0.5.2.dist-info/RECORD
+35 files, 167341 bytes uncompressed, 66670 bytes compressed:  60.2%
```

## zipnote {}

```diff
@@ -27,14 +27,17 @@
 
 Filename: telepythy/gui/highlighter.py
 Comment: 
 
 Filename: telepythy/gui/history.py
 Comment: 
 
+Filename: telepythy/gui/lexer.py
+Comment: 
+
 Filename: telepythy/gui/output.py
 Comment: 
 
 Filename: telepythy/gui/profiles.py
 Comment: 
 
 Filename: telepythy/gui/resources_rc.py
@@ -45,18 +48,18 @@
 
 Filename: telepythy/gui/source.py
 Comment: 
 
 Filename: telepythy/gui/styles.py
 Comment: 
 
-Filename: telepythy/gui/syntaxhighlighters.py
+Filename: telepythy/gui/textedit.py
 Comment: 
 
-Filename: telepythy/gui/textedit.py
+Filename: telepythy/gui/tips.py
 Comment: 
 
 Filename: telepythy/gui/utils.py
 Comment: 
 
 Filename: telepythy/gui/window.py
 Comment: 
@@ -81,23 +84,23 @@
 
 Filename: telepythy/lib/sockio.py
 Comment: 
 
 Filename: telepythy/lib/utils.py
 Comment: 
 
-Filename: telepythy-0.5.1.dist-info/METADATA
+Filename: telepythy-0.5.2.dist-info/METADATA
 Comment: 
 
-Filename: telepythy-0.5.1.dist-info/WHEEL
+Filename: telepythy-0.5.2.dist-info/WHEEL
 Comment: 
 
-Filename: telepythy-0.5.1.dist-info/entry_points.txt
+Filename: telepythy-0.5.2.dist-info/entry_points.txt
 Comment: 
 
-Filename: telepythy-0.5.1.dist-info/top_level.txt
+Filename: telepythy-0.5.2.dist-info/top_level.txt
 Comment: 
 
-Filename: telepythy-0.5.1.dist-info/RECORD
+Filename: telepythy-0.5.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## telepythy/__init__.py

```diff
@@ -1,3 +1,3 @@
 from .lib import client, server, start_client, start_server
 
-__version__ = '0.5.1'
+__version__ = '0.5.2'
```

## telepythy/telepythy_service.pyz

### zipinfo {}

```diff
@@ -1,14 +1,14 @@
-Zip file size: 10985 bytes, number of entries: 12
--rw-r--r--  2.0 unx       68 b- defN 22-Aug-15 23:11 telepythy/__main__.py
--rw-r--r--  2.0 unx     1578 b- defN 22-Aug-18 22:40 telepythy/pack.py
--rw-r--r--  2.0 unx       83 b- defN 22-Aug-21 22:59 telepythy/__init__.py
--rw-r--r--  2.0 unx     1626 b- defN 22-Aug-22 18:46 telepythy/lib/__main__.py
--rw-r--r--  2.0 unx     4075 b- defN 22-Aug-15 23:11 telepythy/lib/sockio.py
--rw-r--r--  2.0 unx     3008 b- defN 22-Aug-16 13:36 telepythy/lib/utils.py
--rw-r--r--  2.0 unx      555 b- defN 22-Aug-15 23:11 telepythy/lib/event_handlers.py
--rw-r--r--  2.0 unx     2281 b- defN 22-Aug-22 16:36 telepythy/lib/logs.py
--rw-r--r--  2.0 unx     6220 b- defN 22-Aug-15 23:11 telepythy/lib/interpreter.py
--rw-r--r--  2.0 unx     6177 b- defN 22-Aug-15 23:11 telepythy/lib/service.py
--rw-r--r--  2.0 unx     1683 b- defN 22-Aug-15 23:11 telepythy/lib/__init__.py
-?rw-------  2.0 unx       41 b- defN 22-Aug-22 19:00 __main__.py
-12 files, 27395 bytes uncompressed, 9490 bytes compressed:  65.4%
+Zip file size: 11067 bytes, number of entries: 12
+-rwxr-xr-x  2.0 unx       68 b- defN 22-Sep-07 10:39 telepythy/__main__.py
+-rwxr-xr-x  2.0 unx     1578 b- defN 22-Sep-07 10:39 telepythy/pack.py
+-rw-r--r--  2.0 unx       83 b- defN 23-Jul-29 09:53 telepythy/__init__.py
+-rw-rw-r--  2.0 unx     6220 b- defN 22-Jul-07 15:47 telepythy/lib/interpreter.py
+-rw-r--r--  2.0 unx     1683 b- defN 22-Sep-07 10:39 telepythy/lib/__init__.py
+-rw-r--r--  2.0 unx     1626 b- defN 22-Sep-07 10:39 telepythy/lib/__main__.py
+-rw-r--r--  2.0 unx     2281 b- defN 22-Sep-07 10:39 telepythy/lib/logs.py
+-rw-r--r--  2.0 unx     6366 b- defN 22-Oct-09 16:56 telepythy/lib/service.py
+-rw-r--r--  2.0 unx     4075 b- defN 22-Sep-07 10:39 telepythy/lib/sockio.py
+-rw-r--r--  2.0 unx     3008 b- defN 22-Sep-07 10:39 telepythy/lib/utils.py
+-rw-r--r--  2.0 unx      555 b- defN 22-Oct-09 15:22 telepythy/lib/event_handlers.py
+?rw-------  2.0 unx       41 b- defN 23-Jul-29 12:42 __main__.py
+12 files, 27584 bytes uncompressed, 9572 bytes compressed:  65.3%
```

### zipnote «TEMP»/diffoscope_v8gvc6ry_/tmpkjd8si8e_.zip

```diff
@@ -3,35 +3,35 @@
 
 Filename: telepythy/pack.py
 Comment: 
 
 Filename: telepythy/__init__.py
 Comment: 
 
-Filename: telepythy/lib/__main__.py
+Filename: telepythy/lib/interpreter.py
 Comment: 
 
-Filename: telepythy/lib/sockio.py
+Filename: telepythy/lib/__init__.py
 Comment: 
 
-Filename: telepythy/lib/utils.py
+Filename: telepythy/lib/__main__.py
 Comment: 
 
-Filename: telepythy/lib/event_handlers.py
+Filename: telepythy/lib/logs.py
 Comment: 
 
-Filename: telepythy/lib/logs.py
+Filename: telepythy/lib/service.py
 Comment: 
 
-Filename: telepythy/lib/interpreter.py
+Filename: telepythy/lib/sockio.py
 Comment: 
 
-Filename: telepythy/lib/service.py
+Filename: telepythy/lib/utils.py
 Comment: 
 
-Filename: telepythy/lib/__init__.py
+Filename: telepythy/lib/event_handlers.py
 Comment: 
 
 Filename: __main__.py
 Comment: 
 
 Zip file comment:
```

### filetype from file(1)

```diff
@@ -1 +1 @@
-Zip archive data, made by v2.0 UNIX, extract using at least v2.0, last modified, last modified Sun, Aug 15 2022 23:11:26, uncompressed size 68, method=deflate
+Zip archive data, made by v2.0 UNIX, extract using at least v2.0, last modified, last modified Sun, Sep 07 2022 10:39:42, uncompressed size 68, method=deflate
```

### telepythy/__init__.py

```diff
@@ -1,3 +1,3 @@
 from .lib import client, server, start_client, start_server
 
-__version__ = '0.5.1'
+__version__ = '0.5.2'
```

### telepythy/lib/service.py

```diff
@@ -92,15 +92,15 @@
         return self._inter.locals
 
     def evaluate(self, source, notify=True):
         self._is_evaluating = True
         try:
             self._inter.evaluate(source)
         except (Exception, KeyboardInterrupt):
-            traceback.print_exc()
+            self.add_event('error', text=traceback.format_exc())
         finally:
             self._is_evaluating = False
             if notify:
                 self.add_event('done')
 
     def interrupt(self):
         if self._is_evaluating:
@@ -123,14 +123,18 @@
         else:
             log.debug('evt: %s%s', name, (data or '') and ': ' + repr(data))
 
         event = {'evt': name, 'data': data}
         self._events.put(event)
 
     def register_event_handler(self, handler):
+        """Registers a handler for an external event loop.
+
+        The handler will be called once for every loop in the telepythy event
+        handler."""
         self._event_handlers.append(handler)
 
     def _handle(self, sock):
         self._stop.clear()
 
         self.add_event('start', version=sys.version)
```

## telepythy/gui/__main__.py

```diff
@@ -1,21 +1,19 @@
 import sys
 import argparse
 
-# absolute imports to support PyInstaller
-# https://github.com/pyinstaller/pyinstaller/issues/2560
-from PySide6 import QtGui, QtWidgets
+from qtpy import QtGui, QtWidgets
 
-from telepythy import pack
-from telepythy.lib import logs
+from .. import pack
+from ..lib import logs
 
-from telepythy.gui.window import Window
-from telepythy.gui.profiles import Profiles
-from telepythy.gui import config
-from telepythy.gui import utils
+from .window import Window
+from .profiles import Profiles
+from . import config
+from . import utils
 
 def main():
     parser = argparse.ArgumentParser()
 
     parser.add_argument('-p', '--profile', default='default',
         help='profile or Python executable to load (default: %(default)s)')
     parser.add_argument('-l', '--list-profiles', action='store_true',
```

## telepythy/gui/about.py

```diff
@@ -25,35 +25,35 @@
         icon = QtGui.QIcon(':icon')
         icon_label.setPixmap(icon.pixmap(48))
 
         title_label = QtWidgets.QLabel('Telepythy')
         title_label.setAlignment(Qt.AlignCenter)
         font = title_label.font()
         font.setPointSize(16)
-        font.setWeight(font.Bold)
+        font.setWeight(font.Weight.Bold)
         title_label.setFont(font)
 
         version_label = QtWidgets.QLabel(f'Version {__version__}')
 
         title_layout = QtWidgets.QGridLayout()
         title_layout.addWidget(icon_label, 0, 0, 2, 1)
         title_layout.addWidget(title_label, 0, 1, 1, 1)
         title_layout.addWidget(version_label, 1, 1, 1, 1)
         title_layout.setColumnStretch(2, 2)
 
         frame = QtWidgets.QFrame()
-        frame.setFrameShape(frame.StyledPanel)
-        frame.setFrameShadow(frame.Raised)
+        frame.setFrameShape(frame.Shape.StyledPanel)
+        frame.setFrameShadow(frame.Shadow.Raised)
         frame.setLayout(title_layout)
 
         desc_label = QtWidgets.QLabel(DESCRIPTION)
         desc_label.setOpenExternalLinks(True)
 
         buttons = QtWidgets.QDialogButtonBox()
-        buttons.setStandardButtons(buttons.Close)
+        buttons.setStandardButtons(buttons.StandardButton.Close)
         buttons.rejected.connect(self.accept)
 
         layout = QtWidgets.QVBoxLayout()
         layout.addWidget(frame)
         layout.addWidget(desc_label)
         layout.addWidget(buttons)
```

## telepythy/gui/config.py

```diff
@@ -1,48 +1,38 @@
 import os
 
-import appdirs
+import platformdirs
 import snekcfg
 from qtpy import QtGui, QtWidgets
 
 from ..lib import logs
 from ..lib import utils
 
 log = logs.get(__name__)
 
-def get_config_path(*names):
-    cfg_dir = appdirs.user_config_dir('telepythy', False)
-    return os.path.join(cfg_dir, *names)
-
-def get_config_file_path():
-    return get_config_path('telepythy.cfg')
-
-def expand_path(path):
-    return os.path.expanduser(os.path.expandvars(path))
-
 def init(path=None):
     path = expand_path(path or get_config_file_path())
 
     os.makedirs(os.path.dirname(path), exist_ok=True)
     log.debug('config: %s', path)
 
     # rename the snekcfg logger
     snekcfg.log = logs.get(log.name)
 
     cfg = snekcfg.Config(path)
     register_types(cfg)
 
-    cfg.register_type('path', None, expand_path)
-
     sct = cfg.section('profiles', strict=False)
     sct.define('default.command', utils.DEFAULT_COMMAND)
     sct.define('connect.connect', utils.DEFAULT_ADDR)
     sct.define('serve.serve', utils.DEFAULT_ADDR)
 
-    cfg.define('startup.source_path', get_config_path('startup.py'), 'path')
+    sct = cfg.section('startup')
+    sct.define('source_path', get_config_path('startup.py'), 'path')
+    sct.define('show_tips', True)
 
     sct = cfg.section('style')
     sct.define('theme', 'dark')
     sct.define('syntax', 'gruvbox-dark')
     sct.define('font', QtGui.QFont('monospace', 12))
 
     sct = cfg.section('window')
@@ -54,15 +44,27 @@
     sct.define('view.menu', True)
 
     cfg.read()
     cfg.write()
 
     return cfg
 
+def get_config_path(*names):
+    cfg_dir = platformdirs.user_config_dir('telepythy', False)
+    return os.path.join(cfg_dir, *names)
+
+def get_config_file_path():
+    return get_config_path('telepythy.cfg')
+
 def register_types(cfg):
+    cfg.register_type('path', None, expand_path)
+
     def str2font(v):
         family, size = v.split(',')
         return QtGui.QFont(family.strip(), int(size.strip()))
     cfg.register_type(QtGui.QFont,
         lambda v: f'{v.family()},{v.pointSize()}',
         str2font,
         )
+
+def expand_path(path):
+    return os.path.expanduser(os.path.expandvars(path))
```

## telepythy/gui/control.py

```diff
@@ -84,15 +84,15 @@
                     continue
                 name = event['evt']
                 call_handlers(name, event)
 
         except Exception as e:
             log.debug('_handle_events error: %s', repr(e))
             stop.set()
-            call_handlers('error', repr(e))
+            call_handlers('exception', repr(e))
 
     def _handle_commands(self, sock):
         stop = self._stop
         q = self._cmd_queue
 
         try:
             while not stop.is_set():
@@ -104,15 +104,15 @@
 
                 func = getattr(ServiceProxy(sock), cmd_name)
                 func(*cmd_args)
 
         except Exception as e:
             log.debug('_handle_commands error: %s', repr(e))
             stop.set()
-            self._call_handlers('error', repr(e))
+            self._call_handlers('exception', repr(e))
 
     def _call_handlers(self, name, event=None):
         for handler in self._handlers.get(name, []):
             handler(event)
 
 class ClientControl(Control):
     def __init__(self, address):
```

## telepythy/gui/highlighter.py

```diff
@@ -4,21 +4,21 @@
 # Distributed under the terms of the Modified BSD License.
 
 import enum
 
 from qtpy import QtGui
 
 from pygments import styles
-from pygments import lexers
 
 class BlockState(enum.IntEnum):
     source = 0
     output = 1
-    session = 2
-    fold = 3
+    error = 2
+    session = 3
+    fold = 4
 
 class BlockData(QtGui.QTextBlockUserData):
     """Storage for the user data associated with each line."""
     syntax_stack = ('root',)
 
     def __init__(self, **kwargs):
         super().__init__()
@@ -41,57 +41,60 @@
         kwds = ', '.join(['%s=%r' % (attr, getattr(self, attr))
                            for attr in attrs])
         return 'BlockData(%s)' % kwds
 
 class Highlighter(QtGui.QSyntaxHighlighter):
     """Syntax highlighter that uses Pygments for parsing."""
 
-    def __init__(self, parent, lexer=None):
+    def __init__(self, lexer, parent):
         super().__init__(parent)
 
-        self._lexer = lexer or lexers.PythonLexer()
-        self._lexer._stack = ('root',)
+        self._lexer = lexer
         self.set_style(styles.get_style_by_name('default'))
 
+    def reset(self):
+        self._lexer.reset()
+
     def highlightBlock(self, string):
         """Highlight a block of text."""
         if not string:
             return
 
         doc = self.document()
         block = self.currentBlock()
         data = self.currentBlockUserData()
 
         state = data and data.state
         if state is None:
             state = doc.context.get('state')
 
-        if state in (BlockState.session, BlockState.fold):
+        if state == BlockState.output:
+            return
+        elif state in (BlockState.session, BlockState.fold):
             style = self._style
             fmt = QtGui.QTextCharFormat()
             fmt.setForeground(QtGui.QBrush(style.highlight_text_color))
             fmt.setBackground(QtGui.QBrush(style.highlight_color))
             self.setFormat(0, block.length(), fmt)
 
             BlockData.update_block(block, state=state)
             return
 
         prev_data = block.previous().userData()
-        if prev_data is not None:
-            self._lexer._stack = prev_data.syntax_stack
+        self._lexer.stack = prev_data and prev_data.syntax_stack
 
         # Lex the text using Pygments
         index = 0
         for token, text in self._lexer.get_tokens(string):
             length = len(text)
             self.setFormat(index, length, self._get_format(token))
             index += length
 
         BlockData.update_block(block, state=state,
-            syntax_stack=self._lexer._stack)
+            syntax_stack=self._lexer.stack)
 
     def set_style(self, style):
         """Sets the style to the specified Pygments style."""
         self._style = style
         self._clear_caches()
 
         self.rehighlight()
@@ -137,77 +140,7 @@
         return result
 
     def _get_brush(self, color):
         """Returns a brush for the color."""
         if color and not color.startswith('#'):
             color = '#' + color
         return QtGui.QBrush(color)
-
-## Monkeypatched lexers to preserve end statestack ##
-
-from pygments.lexer import RegexLexer
-from pygments.token import Text, Error, _TokenType
-
-def get_tokens_unprocessed(self, text, stack=('root',)):
-    """
-    Split ``text`` into (tokentype, text) pairs.
-
-    ``stack`` is the initial stack (default: ``['root']``)
-    """
-    pos = 0
-    tokendefs = self._tokens
-    statestack = list(self._stack or stack)
-    statetokens = tokendefs[statestack[-1]]
-    while 1:
-        for rexmatch, action, new_state in statetokens:
-            m = rexmatch(text, pos)
-            if m:
-                if action is not None:
-                    if type(action) is _TokenType:
-                        yield pos, action, m.group()
-                    else:
-                        yield from action(self, m)
-                pos = m.end()
-                if new_state is not None:
-                    # state transition
-                    if isinstance(new_state, tuple):
-                        for state in new_state:
-                            if state == '#pop':
-                                if len(statestack) > 1:
-                                    statestack.pop()
-                            elif state == '#push':
-                                statestack.append(statestack[-1])
-                            else:
-                                statestack.append(state)
-                    elif isinstance(new_state, int):
-                        # pop, but keep at least one state on the stack
-                        # (random code leading to unexpected pops should
-                        # not allow exceptions)
-                        if abs(new_state) >= len(statestack):
-                            del statestack[1:]
-                        else:
-                            del statestack[new_state:]
-                    elif new_state == '#push':
-                        statestack.append(statestack[-1])
-                    else:
-                        assert False, "wrong state def: %r" % new_state
-                    statetokens = tokendefs[statestack[-1]]
-                break
-        else:
-            # We are here only if all state tokens have been considered
-            # and there was not a match on any of them.
-            try:
-                if text[pos] == '\n':
-                    # at EOL, reset state to "root"
-                    statestack = ['root']
-                    statetokens = tokendefs['root']
-                    yield pos, Text, '\n'
-                    pos += 1
-                    continue
-                yield pos, Error, text[pos]
-                pos += 1
-            except IndexError:
-                break
-
-    self._stack = tuple(statestack)
-RegexLexer._stack = ('root',)
-RegexLexer.get_tokens_unprocessed = get_tokens_unprocessed
```

## telepythy/gui/output.py

```diff
@@ -1,16 +1,15 @@
 import re
 import itertools
 import collections
 
 from qtpy.QtCore import Qt
 from qtpy import QtCore, QtGui, QtWidgets
 
-from pygments.lexers import PythonConsoleLexer
-
+from . import lexer
 from . import textedit
 from .highlighter import BlockState
 
 PS1 = '>>> '
 PS2 = '... '
 BUFFER_TIMEOUT = 50 # ms
 BUFFER_CHUNK_SIZE = 1000 # lines
@@ -87,15 +86,15 @@
         cur.movePosition(cur.EndOfBlock)
         cur.insertBlock()
         self._fold_block = fold_block = cur.block()
         fold_block.setUserState(self.id)
 
         # set state context for the highlighter
         with self._doc.using_context(state=BlockState.fold):
-            tpl = '[{} more lines. Double-click to unfold)]'
+            tpl = '[{} more lines. Double-click to unfold]'
             cur.insertText(tpl.format(self.count() - 2))
 
     def unfold(self):
         if not self.is_folded:
             return
 
         # remove the fold info block
@@ -106,15 +105,15 @@
         for block in self.blocks():
             block.setVisible(True)
 
         self._fold_block = None
 
 class OutputEdit(textedit.TextEdit):
     def __init__(self, parent=None):
-        super().__init__(PythonConsoleLexer(), parent)
+        super().__init__(lexer.ConsoleLexer(), parent)
 
         self._buffer = []
         # timer used to flush the buffer at regular intervals
         # (see timerEvent)
         self.startTimer(BUFFER_TIMEOUT)
 
         self.setReadOnly(True)
@@ -135,20 +134,20 @@
         self.addAction(self.action_fold_block)
 
         self.action_unfold_block = QtWidgets.QAction('Unfold Block')
         self.action_unfold_block.triggered.connect(lambda: self.unfold_block())
         self.addAction(self.action_unfold_block)
 
         self.action_fold_last_block = QtWidgets.QAction('Fold Last Block')
-        self.action_fold_last_block.setShortcut('Ctrl+-')
+        self.action_fold_last_block.setShortcut('Ctrl+[')
         self.action_fold_last_block.triggered.connect(lambda: self.fold_block(last=True))
         self.addAction(self.action_fold_last_block)
 
         self.action_unfold_last_block = QtWidgets.QAction('Unfold Last Block')
-        self.action_unfold_last_block.setShortcut('Ctrl+=')
+        self.action_unfold_last_block.setShortcut('Ctrl+]')
         self.action_unfold_last_block.triggered.connect(lambda: self.unfold_block(last=True))
         self.addAction(self.action_unfold_last_block)
 
         self.action_copy_source = QtWidgets.QAction('Copy Source')
         self.action_copy_source.setShortcut('Ctrl+Shift+c')
         self.action_copy_source.triggered.connect(self.copy_source)
         self.addAction(self.action_copy_source)
@@ -192,16 +191,21 @@
     ## append ##
 
     @QtCore.Slot(str)
     def append(self, text='\n', state=None):
         state = BlockState.output if state is None else state
         self._buffer.append((text, state))
 
+    @QtCore.Slot(str)
+    def append_error(self, text):
+        self.append(text, BlockState.error)
+
     @QtCore.Slot()
     def append_prompt(self):
+        self.highlighter.reset()
         self.append(PS1, BlockState.source)
 
     def append_source(self, source):
         source = source.strip()
         if not source:
             return
 
@@ -225,15 +229,15 @@
         buf = self._buffer
         if not buf: return
         # pull a chunk to prevent long rendering delays
         buf, self._buffer = buf[:BUFFER_CHUNK_SIZE], buf[BUFFER_CHUNK_SIZE:]
 
         doc = self.document()
         cur = self.textCursor()
-        cur.movePosition(cur.End)
+        cur.movePosition(cur.MoveOperation.End)
 
         is_prompt = lambda state, text: (
             state == BlockState.source and text.startswith(PS1))
 
         key = lambda item: item[1]
         for state, items in itertools.groupby(buf, key):
             start_block = cur.block()
```

## telepythy/gui/resources_rc.py

```diff
@@ -1,151 +1,15 @@
 # Resource object code (Python 3)
 # Created by: object code
-# Created by: The Resource Compiler for Qt version 6.3.1
+# Created by: The Resource Compiler for Qt version 6.5.2
 # WARNING! All changes made in this file will be lost!
 
 from PySide6 import QtCore
 
 qt_resource_data = b"\
-\x00\x00\x08W\
-\x00\
-\x00B>x\x9c\xed\x9b{p\x13E\x1c\xc7\xc3\xa0\x83\
-\x8e\xce\xa8\xa08\xfa\x87\xe8\x0c/_\x8c\xca\x1f*(\
-\x04\x816\x8fj\x1fPD\x84*\xf2V(\xa0PE\
-*\xb4\x85\x0a\x14(P\x0aC[ \xb9$P\xfa\xc8\
-\x85\x8e<\x05Z\x98\xb6i\xfa\x12\x0aU\x91\xf2\xa8\x94\
-AP)\x05G\x04i\xfbs\x7f{\xb94I\xd3\x94\
-${IP\xb7\xf3\xed\xaf\xbd\xdb\xbb\xfb}v\xf7v\
-\x7f\xb7\xb7'\x93u!?r\xb9\x8c\xfc~Z\xd6\xff\
--\x99\xac\xa7L&\xebOD6\xc9\x12d\xc2v\x9a\
-\xe4\xb2\xff\x93\x9f\xd3\xaem\xeaGxN\x15n\xd4(\
-\xbf2q\xcam\xbcVY\xc5s\xcazb\x1b\x89Z\
-\xacj\xc4m&\xad\xb2\x12\xf3`^<\xc6\xa4\x89x\
-8\xd0\xfe{\x93\x88\xef}\x09G\x12\xf2\x10\xb6f\x22\
-\xf0R\xcdx\x0e\xa3F\x95\x90\xaf\x09\xeb\x13h.w\
-\xa9\xa8H~\x0f\xf1s\x02\xf1\xb9\xcc\x07\xde\xced6\
-q\x8a\xf1x\xad@\xf3\x8a\x09}\xe15\xca)\xc4\xb7\
-3\x12r;\xeb\xb4I\xab\x98\x94\x9b\x1b\xdd5\x90\xec\
-&\xadz \xf1\xa5\xc2\x8f\xdc\x8e\xe2T\xc7vnU\
-\x0f\xf27\xb7F#\xbf\x8f\xd7*\xd2\x89\x0f\xad\x01c\
-oS\x0b\xe9k\xd2\xf6\xa4)\xbb\xf9\x83\x1d\xfb!r\
-\xcd\xa3A\xc0\xed \xd2O~W\xa0\x0f\xed-%\xbb\
-I\xa3\x90\x93k5\x05\x9a\xd5\x8d\xae\xf2:\xe5Pi\
-\xd8\x95\x11\xe4\xfc\x7f\x05\x01cg\xbai\xd2\xaa\xc6\xb0\
-d7r\xca\xd1\xbco\xe3\xb8\xbf\xd5\xcck\x14Q,\
-\xd8\xadm\xfen\xa8wg\xdd2r\xa1#|a\xc7\
-8\x8e\x9c\xe7Z\x10\xb0x\xab\xab\xde\xf6\x898\xc6a\
-\x9f\x1a\x04\x0c\xbe\xaa\x86\xc4I\xf7{\xcao\xd4*7\
-\x06\x81\xefL\x84\xf1\x81\x87\xec\x83y\x0fc\x9b\x5cN\
-\x0d\xf1\x05\xd3`\xdc\xc1\x85\xf0\xce\xe1$\x88,J\x84\
-\x8f\xf6\xc7A\xa2i2\xe8\x0c\x11\xa0\xd7G@\x1e\xc9\
-#\xe6'}*$\xf1\x93\xe0\x83\x03_@TQ\x02\
-\xbcw0\x1ef\xef\x8e\x05\x8d!J\x8a2h\xe19\
-\xc5\xebw\xc2N\xe3y\x12Wzz\x8d\x89\xdf\xc6\xc1\
-\xd0\xd2\x95T\xea#K!\xbap\x11\x8c\x22\x1aQ\xbc\
-\x82n\x1bY\xbc\x1c\xd6\xe4\xbe/\xb0kU0i\x7f\
-[~{\x85\x14/\x83\xcc\xech)\xca\xe0\xf8\x9d<\
-7\x199\xc54O\xcf\x8d\xf5*/\x11\xfc\xc76`\
-\xbf/\x9f\xb0r\x86Hjs\xb8\xb7!-g\x1cL\
-\xdf\xfb\xa9KvQ\x13\xbf\xfd\x5c\x92\xfb\xc0\xc8\xa9&\
-\xbbc\xcf\xc8\x18x/\xa9\x9b\xb3\xde\x9c;\x92\xb4a\
-\xd1\xff\x08\xf2\xf7\xa4\xfd\xf3a\xe6\x9e90m\xdfg\
-\x10s`\x01\xbd'\xe4\xa5)\xedX\xdf2\xaf\x01U\
-y&\x84\x94\xa5\xb7m+I\xa1mD\x8228\xe3\
-\xae\x0d\x90\xfd1\xde\x9e\x1b\xdbl\xd8\x91%n\xeb\xd5\
-^r\xf3*\x98^s\x08\x96\xfcT\x0f\xc9\xa7\xceS\
--\xf8\xf1\x04\x84Y\xb2\xe8\xfe\x1c\x9d\x9a%\xb7M8\
-\x7f\xd01\xbf\xaa\xdc\x97sc\xfb\x8e\xdf9\x15\xde=\
-\x14\x0f\xc3JV\xb8\xe5\x1f_\xcd\xdb\xb8\xed\xb5\xf0\xc7\
-ZI\xf9\x89\xcc.\xd9\x85X\x87\xd9up<\xd8\xb8\
-c,\xa4\xe4\xc7\xd0~\x1e\xc7\x81\xe5\xc6\x0f!5o\
-\x02L\xde7\x1ff\xd7\x96Q\xde\xb8\xfd\xa7\xa9M\xf8\
-\xae\x1e\x16\x96\x9c\xa5\x7f+-\x1b\xa5\xe4\xc7y\x83\xbe\
-.\xda\xfeR\xc9\xae\xe7\xa4Y{f\xc3\xdc\xda\x0a\xca\
-:tD)\x8c[|\x0c\x06\x0f)\x81\xd8\x9c\x9f\xe8\
-6\xb5%SR~\x9cOt\xc1\xef\xb7gz{\xfe\
-!\xc3J\xe1\xc5\xa7\x0a\xa9\xfc\xc5OTa\xcf\x9e\xbb\
-9\xb4;/\xccC\xffW\xf8\x9bq^^\xe4'c\
-~\xa4\xbf\xd8\x83\x84\x1f\xfb\x80p\x1b?\xb9\x1f\xfc\xcb\
-?\xa7s~.LR\x1f\xf0\x1d\x8b\xdd\xbd\x9f\xedO\
-~\x8c\x87\x90\xff\xeb\xba\x0b\x10\x12U\x01\x83\x06\x99\xa9\
-\xe6\xf0u\x90\x5c\xd7@\xf9\xb3\xb6\x8f\x96\xda\x0f\x83\x1d\
-\x7f\xb5\xd4\xcc\xf9\xdb\xc7\x80\xaeh\x15d\x9e\xd8\x0d\xeb\
-\x1aNA\xea\xd5? \xb5\xe9\x86K\xad\xbd\xfc\x0bl\
-\xa8+\x83-\x16\x0e\xb2\x0bb\xc9\xf1\xeccA|\xaf\
-d\xc7\xdf \x15w^\xce\x04\xca\x9c\xdax\xbdC\xde\
-\xce\xb4\xbe\xa1\x0e\xf4\x87\x961-\x07\xc2\xff\xb3\x1d\xbf\
-$s\xba\xdb\xf6~\x09k\xae\x5c\xf1\x9a\xdbY\x9bN\
-\x1e\x01\xa3>\x9c\x95\x7f\x8dv\xfc\xb7\x99\xb3\xefY@\
-\xd8\xaf1c\x17\xb5\xf1\x94\x19\xfbn\x16>\xde\x96\x8a\
-\xdf\xa8\x0b\x87\xb4\x8b\xf5\xcc\xd9E\xe9\x0aW\xb2\xe6g\
-\xda\xfe\xf5\x07\x96H\xc6\x8eJ\xaf\xafe\xdd\xfe\x99\xf6\
-\x7f\x9b\xabvH\xca\x9f\xda\xf4'ico\xfb\xe4\xa3\
-S\xff\xc7t\xfc\xcb:\xb6Sb\xfe\x1b\x90\xb7\xcd\xb7\
-\xf8\xc0i\xfcc\x1a\xffl\xa9\xdc.);\xf6\xab\xbe\
-\xd6?o\x17\xff\xb0\x8e\x7f\xb7\x7f3\xcf\xa5\xdf\xab\x1a\
-\xdbb\x9e\x8f\x0a\x8c\xf0EM\x8d\xc3\xfe\x95\xbf]\x83\
-wuY\x90\xdcpI\xf8\xff\xaa\xeb\x98\x01\xc7A_\
-}t\x88\x7f5\x8a(\x96\xfc\xa8M'\x8b\xa9\xaf)\
-\x8dM\x10\xf3\xc3n\x18aY\x07/\xa7\xc6\xc2\xb33\
-\xc6Cd\xa1\x16\x92\x7f\xff\xd5%\xdbjro\xcf:\
-m\x81W\x12g\xc1\xb3\xb1\x13`H\xe12\x888\xaa\
-\x83\x85\x17O[\xeb\xbe\x09r\x8cS}\xf6\x0f\xdf\xe7\
-\xda\xf8\xb9\xe1=x\xc6\xcf\xbf\xf9\x86Q\xb0\xfe\xdc\x09\
-\x88<\xaa\xa7\xf3Y\xaf\xe7-\x82\xee\x8f\x0d\x80\xee=\
-^\x84^!\x0a\x18n^K\xcae\x17\xc45|\x0f\
-\x89\x97/@\xfc\xc530\xf3l\x19\xa8\xab6\xc3\xcb\
-\xabg\xd1|\xa8~S\xc6\xda\xe6I\x17\x9120\xec\
-\x8bg\xe1\x9f\xc3\xf3\xafP\x06\x9e\xcf\xf9wz\x1fd\
-\x8f\x81a\xe6T\x81\x9f_\x0c=z\x0a\xfcO\x87\xa9\
-\xdd\xce\x0d\xbe\x926\xc7\xc6\xdf\xff\x93\xf7m\xdb\xe7\x97\
-\xaeg\xe2\x97}\xdf\xd7v\x0f(\x93Y\xf3\xa3\xa2+\
-3m\xfe\x0f\xcc\x98\x07\xcf\xcf\x9f\x08\x83\xf7.\xedt\
-~\xf8\xa5\x94\x99\xf0B\xfc\x14x\xf3\xc8r\xdb\xb6\x8c\
-\x82\x8f\xd9\xf0s\xca\xa4v\xfc\x8c\xe7?E\xc5\x1f\xbe\
-\xb3\xf9\xf0\xce\x14E\xca\x91\x95O\x05[\x14\xfd\x9c\xf9\
-\xad\xe3 \xf3\xb5\x5c\xb9\x86\x08P\x96o\xe8\x90\xabO\
-y)<X\xfd7\xf4\xac\xba\x00\x83\xcd\x1d\xe7K>\
-\x98\xc4\xca'\x97\xf3\xdfB\x1bP| E\x1bH>\
-\x98\x08r\x17L\x03\xca\x0a\xe0\x81\xea\x16\x9b\x9e\xa8<\
-\xeb\x92}le\x163_p\x8dfG\xfc\xf8\xfe\x8b\
-\xe49'E\x19\xcc5\xa7\xb7\xe3z\xbc\xea\xbc\x03?\
-\xeaU\xf3V\x87<\xe1\x15\x19\xa0\xdf1\x8e\x95\x1fn\
-\xdf\x7fa\x22}\xe3\x0c)\xf8Q\xf3J\xd6\xd1\xf7^\
-\xc85\xa4t5i\xf7\xcd\xed\xf8\x9f\xb3\xecs\xb8\xe7\
-\x0d;\xdecv}\xc26\xd5\x1d;&o\xdf\x7f\xdf\
-\xa9\xd6\xef\x9a\x0d\xa3*2\xe15sF;vT\xef\
-r3\x8c\xb4\xa4A\x1c)\xab<\xce\xe7\x18\xd7^\xc7\
-\xb1}w\xc6O\xfb\x01\x9d\xe2\x0d^\xe2\xb5\x9d\xabw\
-}\x0eoTZ\xe0\x99\xaa\x9f\xe1\xd1\xea+\xf0d\xf5\
-%\x18PU\x0bS\x8a\x0d\x90\xab\x8fd}\xbdVO\
-\xd7\xc9\xf2\x1a\xd5&)\xf9\xfd+E\xba'\xec\x98\x84\
-5\xbe\xc1\xb7\xce\xd5\x0b\x1d\xf7f\xfd\x13\xa6|MH\
-\x7fr\xfc\xf5 `\xf0VM\xbe~7a\xe4\xd4\xc3\
-\xc8yn\x06\x01\x8b\xa7\xbaE\xee\xe1\x91\xbe\xb0\x8b\x89\
-<\x1fG\xf3w\xd9\xfaW\x93V5\x8a\x05\xbb\x98\xee\
-\xa2\xf5\xcf\xb7X\xaf\x7f\xb6\x95\x81V1\x9c\x0f\xee\xfe\
-\xe0\x1a\xde\xafR\xb0\x8b\x09\x9f\x9d\xa4\x8c\x8f|\xd0\xf7\
-\xf9\xda\xd0\xe7\xa5d\x17\x13\x8e'\xd6\xf8 \x18\xbe\x7f\
-i\xc5\xb5\xba8^\xfb\x83\xdd>\xed\xd4\x84\xbeI\xae\
-\x7f<\x80\xec5\x18\xab\xfa\x9b\xdb>aLm}f\
-:\xe7/n\x5c\xa3\x89\xebT\x83\xe9;@\xfa\xecL\
-\xe7\x0f|[C\xe8\x96[\xa3\xb4\x10\x1b\x13L\xdc\xae\
-\x12\x8d\x1b\x85\xf9D\x8c\x9f}\x99Wn\xb1~\x83\xb0\
-\xb4\xa39\xab`O8\xb7\x8e\xeb\xab\xac\xefX\xf0=\
-\x13\xbek;\xcf\x0b\xdf?\xb7Z\xd5h\xdd\x86\xfb\xb2\
-1/]\x93E\x8e\x0d\xb4\xff\xff\xf6\x04m\xc9\xfa\xcf\
-M\x99\xac\x17\xda\xc32YWa3\xdd\xd1\x8av1\
-\xddM34\xa1}\x08\xa0\x1em7\x9a\x9d\x1e\x90\x80\
-\xb6\x8bp\x189\xb0U\xb0\x8b\x9b\x05;T\xb47\x05\
-\xdb\xabI\xb0\x0f\x89\xb6^\xb0\xdd\x9c\xeda\xc1vu\
-\xb6\x09\x82\xed\x12(\xdb\x91_\xce\xfe\x8b\xd6\x99W,\
-\x07\xe7\xf2\x11\xcbM,G[\xb9\xd2\x0btm+w\
-\xb1\x1e\xc4z\x11\xebI\xac7[=\x8a\xf5\x0a\x0e\x95\
-\xfe\x0fo\xa2l\xfb\
 \x00\x00\x19\x13\
 \x89\
 PNG\x0d\x0a\x1a\x0a\x00\x00\x00\x0dIHDR\x00\
 \x00\x00`\x00\x00\x00`\x08\x06\x00\x00\x00\xe2\x98w8\
 \x00\x00\x00\x06bKGD\x00\xff\x00\xff\x00\xff\xa0\xbd\
 \xa7\x93\x00\x00\x18\xc8IDATx\x9c\xed]{\xac\
 eWY\xff}k\xad\xbd\xf79\xf7\xdc\x99{)}\
@@ -542,14 +406,162 @@
 q\x94\xcf\xb9l\xf4z\xb2\xfc*\x06^\x08\x8bg\x11\
 c\x19P\x05\x18\xa6\xe7\x04\x08\x1d\xe0Z&\xac@\xe3\
 [\xa4\xf0\x15&\xba\xf3\x9b\x8f\x8d\xef\xc0\x1b\xf1]\xfb\
 \xdfX\xcdiNs\x9a\xd3\x9c\xe64\xa79\xcdiN\
 s\x9a\xd3\x9c\xe64\xa79\xcd\xe9{\x87\xfe\x1f[\xeb\
 \xacetF\x05\xe9\x00\x00\x00\x00IEND\xaeB\
 `\x82\
+\x00\x00\x00\xe9\
+<\
+svg fill=\x22#fffff\
+f\x22 xmlns=\x22http:/\
+/www.w3.org/2000\
+/svg\x22  viewBox=\x22\
+0 0 24 24\x22 width\
+=\x2224px\x22 height=\x22\
+24px\x22><path d=\x22M\
+ 2 5 L 2 7 L 22 \
+7 L 22 5 L 2 5 z\
+ M 2 11 L 2 13 L\
+ 22 13 L 22 11 L\
+ 2 11 z M 2 17 L\
+ 2 19 L 22 19 L \
+22 17 L 2 17 z\x22/\
+></svg>\x0a\
+\x00\x00\x08\x0d\
+\x00\
+\x00B>x\xda\xed\x9biP\x14G\x14\xc7\xd72)\
+\x93J\xaaL$1\x95|\x88\xa6\xca\x83\xc4hE\xfd\
+\x90(\x0a\xeb\x05{`8\x14\x0f\x14\x8d\xe2\x99(h\
+\xa2\xa8\x81\xc8\xa1DEE\x05\xb5\x04\xd4\xdd\xd9]\xb9\
+wW*\x8a\xe0\xc1Q\xc0\xb2\x5c\x22\x8a\xf1\xc0\x03\xc5\
+2\x9aDDS\xf1\x88\xc8K\xf7\xcc\xce\xb2 \xcb\xb5\
+\xdd\xcb\xa2\x0e\xf5\xa7a\xa6g\xa6\x7f\xdd=\xddo\xde\
+\xbc\x16\x08z\xa0\x1f\xa1P\x80~\xf7\x17\xd8\x8f\x17\x08\
+\xfa\x0a\x04\x02{$\xb4K\x10\x22\xe0\xf6\xb3\x9bP\xf0\
+z\xb3\xf2v\xe4\x90\xf4}\x0d#qS\xcb\xc4\xbfh\
+\x19\xf1!\x8d\x5c\x5c\xaaa\xc4\xd5(\xadEznP\
+-\xde\xa7\x95\x8bKp\x1e\x9c\x17\x9f\xa3\x95\xb9\xbf\xd7\
+\x1d\x99Q\xd9\x07!\x8e0\xcc\x83\xd8\xea\x91\xa0\x93\xaa\
+\xc7\xd7P\xcb$!\xa92\xd7\x81\xb6\xcc\x9c\x9d-|\
+\x03\x95\xd3\x07\x95\xb9\xd0\x02\xde\xb6\xa4\xd32\xa2\xd9\xf8\
+^\xb6\xc4\xad\x91\x89\x17\xa2\xb2]\xa5\xc8\xdd\x5cW\xb4\
+r\x91or\xb2W\xcf\xaed\xd7\xca\xa5#QY\x8a\
+\xad\xc8\xddT\x8c\xe4\xcc\xe1\x83\xd2\xd1\xd6\xe6\x96\xc9\x84\
+oi\xe4\xa2\xdd\xa8\x0c\x0d]\xc6\xde\xa8\xe7h\xac\x89\
+J\x8f\x12\xf7\xb2\x06;\x1e\x87\xd0=\xcbm\x80\xbb\x89\
+\xd08y:M\xe92\x80j\x7f\x97\x89\x84\xe8^u\
+\xb6\xc6n\xa2\xfb\x1a\x85\xd8\x89\x0e\xbb\xd8\x1d]\xff\xb1\
+\x0d\xb3\xf3z\xa2\x95K\xa6\x91dW3\xe2\xa9\x16\xce\
+\xe3\xd6V\xbdF&\xf2$\xd8\xe7\x1fw#v^O\
+\xd5\x8c\xcbDK\xed8t\x9d\x07\xdd\x90\xdd8\x1et\
+vL\xc4s\x1c\x1eS\xbb1;\xaf\x0ad'\xbd\xdd\
+\xe1g^.\xde\xfb\x12\xb0ss#\xb2\x0f:\xc8\xee\
+\xd0Q\xdb&\x99\x91BP\xdab\xf0>\x19\x08\xdf\xe6\
+\x84\x81Gv(\xcc\xcf\x0c\x80P\xed\x02P\xa8\xdcA\
+\xa9t\x87\x14\x94\x87\xcf\x8f\xc6T\x08\xd3\xf8\xc2\xdc\x13\
+k\xc13;\x04f\x9e\x0c\x02\xff\xa3~ SyR\
+\xb1\x914\x8chT\xbb\xedydWv\xf4\x1e\xf3\x8e\
+\x07\x80S\xc1VV\xd2\xdc\x8d\xe0\x95\xb5\x1e\xa6 M\
+\xcc\xdb\xc2\xee\x9b\x94\xb7\x19v$\xcf\xe2\xd8\xe5\x12\xf0\
+\xcdl\xcco*\xe7\xbcM\x10\x9b\xe0E\xa3\x0e\xce\xb6\
+\xe7\xbdI\xcd\x88\x16w\xf4\xda\xb8]\x85\xf9\x5c\xf9q\
+\x1f0=\x96\x8aX\x19\x95\x07\x9b&1\x93!*\xc9\
+\x1b\x96\x1c\xfb\xb1Ev^\xf3\x8e\xaf\xa1\xf2\x1c\xa8\x19\
+\xc9\x82\xd6\xd8cbF\xbe\x89\xda\xe6Zg\xae\xed\x81\
+\xfa0_~w\xf4\xb7o\xe6jX\x96\xbe\x02\x16g\
+\xfc\x04sN\xacc\x9f\x09aA\xc4\x0b\xac\xe3u;\
+@R\x14\x0b\xce\x85\xbb\x1b\xf7\xe5G\xb0}\x84B\x1d\
+\x5cm\xad\x0f\xa0\xe3s:{m\xdcg]s7\xb4\
+\xda\xae\xa6\x12\xea\xb6\xc1\x92\x8aS\xb0\xe1R5\x84_\
+\xbe\xc9j\xdd\x85s\xe0\xaa\x8fc\x8f')\xa4\x94\xc6\
+B\xd1l\xf3\xfc\x92\x22K\xae\x8d\xfbw\xd0\xe1E0\
+\xfdT\x10\x8c\xcb\xdf\xd2*\xff\xec2\x8d\x91\xdbT\x81\
+\x17*\xa9\xf2c\x1fJ+\xb6\x0e\xb1\xfb\xe0\xf9`o\
+\xe2\x0c\x88H\x9d\xc3\x8e\xf3x\x1e\xd8\xac\xfe\x0e\x22S\
+|`A\xc6j\xf0\xaf,dy\x032\xaf\xb0i\xc8\
+\xe9j\x08\xcc\xbf\xc6\xfe-\xd6\xef\xa5\xc9\x8f\xfd\x06\x83\
+Z\xe8\xfb\x1b\xad5\x1f/O\xf7\x87\x95\x95\xc5,\xab\
+\xd3\xc4\x02\xf0\x0e>\x03\x0e\x8e\xf9\xe0\x97t\x89\xdd'\
+\xd5\xc7R\xe5\xc7\xfe\xc4\x16\xf8\xcb\xbb\x82\xdfq\x5c\x01\
+\x0c\xfd4\x8b\x95\xb5\xf8\xb1\xcf\xca\x94=y\xbfK\x1f\
+\x83\x1f\xfaU\xe1\xaf\xc7~y\x939\xdf\xc3\x9a\xf6\xa8\
+\x0d\xf0\xe31\xc0\xcd\xc8\x8f\x9e\x07\xeb\xf2\xafh\x9b\x9f\
+q\xa5Z\x06\xfc\x8d\xc5\xe4\xd9O\xb0&?\xb6\x870\
+\xff\xafU\xb7\xc0\xd9\xb3\x18F\x8f\xd6\xb1Z\xa1\xa9\x82\
+\xf0\xaa\x1a\x96?.~*\xedr\xa8L\xf8\xcbh3\
+\xa7\xc6O\x03E\xf66\x88=w\x14v\xd5\x5c\x86\xc8\
+\xfb\xff@d\xdd\xa3\x16\xb5\xf3\xee\x1f\xb0\xa7\xaa\x10\x0e\
+\xe8\x19HH\xf3C\xe7Kh\xf8KKL\xf8kh\
+q\xa7$\xf9\xb0\xcc\x91\xb5\x0f\xcd\xf2\xb6\xa5\xe8\x9a*\
+P\x9e\xdaD\xb4\x1e\x10\xff\x0d\x13~*>\xddC\xc7\
+~\x86\x1d\xf7\xeeu\x9a\xbb\xb9\xf6]\xcc\x05\xb5\xd2\x8d\
+T\xf9jM\xf8\x9f\x11gO_\x87\xd8\x1f\x10c\xe7\
+\xb5\xf7\xb2\x0e\x8f\xdd$\xca\xf8\x8c\x16\xbfZ\xe1\x06Q\
+\xb7\xab\x89\xb3\xf3Rdm%\xcdO\xb4\xff+Ol\
+\xa0\xc6\x8e\xb5\xbb\xba\x92t\xff':\xfe\xed/M\xa4\
+\xca\x1fY\xf7/\xeac\x93I\x8e\x7fD\xe7\xbf\xb83\
+\x87)\xf3?\x82\x94CSI\xce\x7fD\xed\x9f\x03%\
+\xf1T\xd9\xf1\xb8ji\xfb\x9b\xda?\xa4\xed\xdf\xf8\xdf\
+V\xb5X\xeem\xb5\x8d6\xcf\xfc45\xac\xad\xa8h\
+r|\xeb_\x0f`\xba\x22\x0e\xc2k\xeep\xff\xdf\x7f\
+hv\x1e$j\xff\xcaD\x9e\xa4\xe7\xbf}\x17\xf3\xd8\
+\xb2F\xd4\xd6\xc1\x9c\xdf\x8f\xc2D\xfd.\x18\x1e\xe9\x07\
+\x9f/\x9d\x0d\x1eYr\x08\xff\xfb\xcf\x16\xd9\xb6\xa3g\
+{\xf9\x15=\x8c\x08]\x0e\x9f\xfb\xf9\x80c\xd6&p\
+/W@\xe0\xed+\x86\xb6\xaf\x83$\xf5\x22\xcb\xed\x1f\
+\x99\xd8\xbd\xd1\xf73\xc1\x8e\xf4\xfbo\xaaj\x0aD_\
+?\x07\x1e\xe5J\xd6\x9f5*e=\xf4\xf9p\x18\xf4\
+\xb1\x1b\x0a\xfd\x9cE0A\xb7\x13\xd5\xcb\x11\x08\xa89\
+\x0f\xa1woA\xd0\xed\xab\xb0\xecZ!HK\xf7\xc3\
+\xf0\xed\xcb\xd9|X\x83\x17\xce0\xfaI\xd7\xa3:P\
+e\x04\x11\x7f\xff5\xf8\xbf\xce\x90\xee\x03\xf1\x09\xd3`\
+\x9c.\x92\xe3\xd7\x04\x83]_\x8e\xbf\xbf\xab\xb4U\xdf\
+\xe0\x88\xa8\x15F~\xfb\x1ff\x19\xf7\xaf.\x88&n\
+\xfb7>\x03\xe2p\x1a6\xb0WI\xac\xb1\xfc#c\
+V\xc1\x90\xd5\xf3\xc0\xe1\xd8\xc66\xfd\xc3_E,\x83\
+/\x83\x16\xc2\xd8\xdc\xcd\xc6}1i\xdf\x93\xfa\x1e\x16\
+F\xdb\xff\xc9+(gk\xbb}\xe2\xad\xc9\x13\xd5#\
+\xa92\xa5\x1d\x10\x0d6\xe3\xff'\x1e\xcb\x95\xacr\x07\
+q\xd1\x1e\xb3\x5c\x03\x8b\x0a\xe0\xdd\xb2\xff\xa0o\xe9-\
+p\xd0\x99\xcf\x17~2\x8c\xaa\xff\x9b\xeb\x03\xa2\xb94\
+\xfa@\xf8\xc9P\x10\xb6\xc04\xac0\x0d\xde){n\
+\xd4\xc7%\xd7Zd\x9fQ\x12G\xd2\xf7\xeb\xd3\xda\xf7\
+/\x94\xe7:\x8d:X\xa9\xdb\xfd\x02\xd7G\xa57\x9b\
+\xf0c}\xad;\xd8$\x8f[q\x0c(\x13\xbd\xad\xf2\
+\xfd\x8b\x8bi\x14/\xa5\xe5\x0bY\x95\xbf\x8b\xfd\xee\x85\
+\xb9\x1c\x0b\xb6\xa3~_\xff\x02\xff\x17\xfa\x8c&\xcf\xbc\
+*q&I\x9f\xc7\x22Z\xdf\xbf\xdb\xab\xe8#\xfe0\
+\xa58\x16\xbe\xd1\xc5\xbc\xc0\x8e5\xa0H\x07\x93\xf4Q\
+\x10\x80\xea*\x85\x99L\xf2\xdegq\xffnW\xdc\x8f\
+B4\x86vl\xe7\xf6#k`L\x89\x1e>+\xbd\
+\x01\x1f\x94\xdd\x83O\xca\xee\xc0\xb0\xd2JX\x98\xa7\x82\
+d\xa5\x07\xe9\xfb5t4NV#\x93\xec{Y\xe2\
+_p\xacn\xe7b|m/\xce\xb53\xfd\xbe3\xf1\
+O\x5c\xac\xaf\xb3=:\xffa7f\xaf\xb3t\xdd\x84\
+\x9a\x91\x8e\xc31\xa5\xdd1\xfe\x11=\xc3\x93\x88\xacg\
+\x91\x89\xbc\xba[\xfc\xabV.\x99\xf2\x8a\xc6??%\
+\x1d\xff\xdch\x1b\x89&\xd8\xf8x\xf0\x00?\xaf4\xd7\
+\x00\xe0w'\x9a\xf6\x91\x05:\x9f*w\x19b\x8d5\
+ x>1\xd8\x07\xb6\xb0\xfe\xa5\x01\xc7\xea\xe2\xf9\xda\
+\xda\xeb\x80\x0e\xcb\x5c\xc6\xe2\xf9\xb5+c\x9b\xb1\xad\xda\
+\x95k\xc0\xb0Mmxg\xban-n\x1c\xa3\x89\xe3\
+Tmi\x1d \xfb\xee\xcc\xfa\x0f,\x8b!l\xc3g\
+\xad\xc71\x9a\xb6\xc4m\xd6n\xe4\xfc\x89\xe5\x16\xfa\x95\
+\x9f\x1b\xd6 l4\xe7\xb3\xb2\xfd\xb5\xc0\x13\xecp|\
+\x95\xe1\x1bK\x82\xe1[\xdbM\xc3\xfa\xe7\x06\x83j\x0d\
+\xfb\xf0\xb1\x04\x9c\x97\x8d\xc9B\xe7\xbe^ANw\x83\
+\xc6\xcd\xf0\xcf\x13\x81\xa0\x1fNs\x04\x82\x9e\xdcn\xf6\
+@\x03N\x83\xd9\xc3l\x86:\x9c\xf6\x06\xa8\xc6i/\
+6;{\x02\x1bY\xd9\x83;\x0d\x9d\xd8\xc0\xa5\xc1\xf5\
+\x5c\xea\xc4\xa7O\xb8\xb4_\x1d\x97\xf6\xe6\xd3j.\xed\
+\xd5<\xcd\xe1\xd2\x9e\xcdSC g\x8f\xaeJ\xcd\x95\
+\xcb\x1cGs^\xbe\x1e\x9a\xd7\x0f_o|=\x1a\xeb\
+\x95\xafg\xbe\xde\xf9v\xe0\xdb\x85o'\xbe\xdd\x8c\xed\
+\xc8\xb7+4i\xf4\xff\x01o\xa2l\xfb\
 \x00\x00\x12:\
 \x89\
 PNG\x0d\x0a\x1a\x0a\x00\x00\x00\x0dIHDR\x00\
 \x00\x00`\x00\x00\x00`\x08\x06\x00\x00\x00\xe2\x98w8\
 \x00\x00\x00\x06bKGD\x00\xff\x00\xff\x00\xff\xa0\xbd\
 \xa7\x93\x00\x00\x11\xefIDATx\x9c\xed\x9d\x7f\x8c\
 \x5cWu\xc7?\xe7\xde\xf7ffw\xbd\xc4\x0e\x0e\x8e\
@@ -836,63 +848,46 @@
 \xa1\xa1\x17\xdb\xc4j[\xb0\xe8\x040\x15\x0af\xefy\
 \xe7\xbd1\xc0%\x02\x03@?\xe8\x05\xc0\x12\x84\xa5(\
 \xdd\x80E\x18A\x19V\x186\xc8a\x85}\x02\xfbD\
 \xf5\x89\x9f\x0c\x0d\xedy_\xfe\xe3=\x1dt\xd0A\x07\
 \x1dt\xd0A\x07\x1dt\xd0A\x07\x1dt\xd0A\x07\x1d\
 t\xb0\xa0\xf8\x7f\x1eL`\xdb\xf4\x84\x84 \x00\x00\x00\
 \x00IEND\xaeB`\x82\
-\x00\x00\x00\xe9\
-<\
-svg fill=\x22#fffff\
-f\x22 xmlns=\x22http:/\
-/www.w3.org/2000\
-/svg\x22  viewBox=\x22\
-0 0 24 24\x22 width\
-=\x2224px\x22 height=\x22\
-24px\x22><path d=\x22M\
- 2 5 L 2 7 L 22 \
-7 L 22 5 L 2 5 z\
- M 2 11 L 2 13 L\
- 22 13 L 22 11 L\
- 2 11 z M 2 17 L\
- 2 19 L 22 19 L \
-22 17 L 2 17 z\x22/\
-></svg>\x0a\
 "
 
 qt_resource_name = b"\
-\x00\x04\
-\x00\x06\xfa^\
-\x00i\
-\x00c\x00o\x00n\
 \x00\x09\
 \x05K~t\
 \x00c\
 \x00o\x00n\x00n\x00e\x00c\x00t\x00e\x00d\
-\x00\x0c\
-\x08*\x9et\
-\x00d\
-\x00i\x00s\x00c\x00o\x00n\x00n\x00e\x00c\x00t\x00e\x00d\
 \x00\x04\
 \x00\x07<U\
 \x00m\
 \x00e\x00n\x00u\
+\x00\x04\
+\x00\x06\xfa^\
+\x00i\
+\x00c\x00o\x00n\
+\x00\x0c\
+\x08*\x9et\
+\x00d\
+\x00i\x00s\x00c\x00o\x00n\x00n\x00e\x00c\x00t\x00e\x00d\
 "
 
 qt_resource_struct = b"\
 \x00\x00\x00\x00\x00\x02\x00\x00\x00\x04\x00\x00\x00\x01\
 \x00\x00\x00\x00\x00\x00\x00\x00\
-\x00\x00\x00\x00\x00\x01\x00\x00\x00\x01\x00\x00\x00\x00\
-\x00\x00\x01\x82\xa4\xa2u-\
-\x00\x00\x00D\x00\x00\x00\x00\x00\x01\x00\x003\xb0\
-\x00\x00\x01\x82\xa4\xa2uA\
-\x00\x00\x00\x0e\x00\x00\x00\x00\x00\x01\x00\x00\x08[\
-\x00\x00\x01\x82\xa4\xa2u\x19\
-\x00\x00\x00&\x00\x00\x00\x00\x00\x01\x00\x00!r\
-\x00\x00\x01\x82\xa4\xa2u#\
+\x00\x00\x00&\x00\x01\x00\x00\x00\x01\x00\x00\x1a\x04\
+\x00\x00\x01\x81Ot\x92\x1a\
+\x00\x00\x00\x18\x00\x00\x00\x00\x00\x01\x00\x00\x19\x17\
+\x00\x00\x01\x81Ot\x92\x18\
+\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00\
+\x00\x00\x01\x81Ot\x92\x18\
+\x00\x00\x004\x00\x00\x00\x00\x00\x01\x00\x00\x22\x15\
+\x00\x00\x01\x81Ot\x92\x18\
 "
 
 def qInitResources():
     QtCore.qRegisterResourceData(0x03, qt_resource_struct, qt_resource_name, qt_resource_data)
 
 def qCleanupResources():
     QtCore.qUnregisterResourceData(0x03, qt_resource_struct, qt_resource_name, qt_resource_data)
```

## telepythy/gui/settings.py

```diff
@@ -10,137 +10,161 @@
 class SettingsWidget(QtWidgets.QWidget):
     def __init__(self, config, window):
         super().__init__(window)
 
         self._config = config
         self._window = window
 
+        # set to prevent sync loops
+        self._reading = False
+
         self.setup()
 
     def setup(self):
         ## styles
 
         style_box = QtWidgets.QGroupBox('Styles')
-        layout = QtWidgets.QFormLayout()
-        style_box.setLayout(layout)
+        style_layout = QtWidgets.QFormLayout()
+        style_box.setLayout(style_layout)
 
         self.theme_combo = combo = QtWidgets.QComboBox()
         combo.addItem('dark')
         combo.addItem('light')
         for style in sorted(QtWidgets.QStyleFactory.keys()):
             combo.addItem(style)
-        combo.currentTextChanged.connect(self.to_config)
-        layout.addRow('Theme', combo)
+        combo.currentTextChanged.connect(self.sync)
+        style_layout.addRow('Theme', combo)
 
         self.syntax_combo = combo = QtWidgets.QComboBox()
         for style in sorted(styles.get_styles()):
             combo.addItem(style)
-        combo.currentTextChanged.connect(self.to_config)
-        layout.addRow('Syntax', combo)
+        combo.currentTextChanged.connect(self.sync)
+        style_layout.addRow('Syntax', combo)
 
         font_layout = QtWidgets.QHBoxLayout()
-        layout.addRow('Font', font_layout)
+        style_layout.addRow('Font', font_layout)
 
         self.font_combo = combo = QtWidgets.QFontComboBox()
-        combo.setFontFilters(combo.MonospacedFonts)
-        combo.currentFontChanged.connect(self.to_config)
+        combo.setFontFilters(combo.FontFilter.MonospacedFonts)
+        combo.currentFontChanged.connect(self.sync)
         font_layout.addWidget(combo)
 
         self.font_size_box = box = QtWidgets.QSpinBox()
         box.setMinimum(1)
-        box.valueChanged.connect(self.to_config)
+        box.valueChanged.connect(self.sync)
         font_layout.addWidget(box)
 
         all_font_toggle = QtWidgets.QCheckBox('Show all fonts')
         def state_changed(state):
-            flt = (combo.AllFonts
-                if state == QtCore.Qt.Checked else combo.MonospacedFonts)
-            self.font_combo.clear()
+            flt = (combo.FontFilter.AllFonts
+                if state == QtCore.Qt.CheckState.Checked.value
+                else combo.FontFilter.MonospacedFonts)
             self.font_combo.setFontFilters(flt)
+            self.font_combo.view().reset()
         all_font_toggle.stateChanged.connect(state_changed)
-        layout.addRow('', all_font_toggle)
+        style_layout.addRow('', all_font_toggle)
+
+        ## startup
+
+        startup_box = QtWidgets.QGroupBox('Startup')
+        startup_layout = QtWidgets.QFormLayout()
+        startup_box.setLayout(startup_layout)
+
+        self.tips_checkbox = box = QtWidgets.QCheckBox()
+        box.stateChanged.connect(self.sync)
+        startup_layout.addRow('Show tips', box)
 
         ## profiles
 
-        pass
+        # TODO
 
         ##
 
         layout = QtWidgets.QVBoxLayout()
         layout.addWidget(style_box)
+        layout.addWidget(startup_box)
         self.setLayout(layout)
 
-    def from_config(self):
-        config = self._config
-
-        # styles
-        self.set_theme()
-        self.set_syntax_style()
-        self.set_font()
-
-        window = config.section('window')
-
-        # menus
-        view_menu = window['view.menu']
-        self._window.menuBar().setVisible(view_menu)
-        self._window.action_toggle_menu.setChecked(view_menu)
-
-        self._window.action_toggle_source_title.setChecked(False)
+    def sync(self):
+        if self._reading:
+            return
+        self.write_config()
+        self.read_config()
 
-        self._window.resize(*window['size'])
+    def write_config(self):
+        cfg = self._config
 
-    def to_config(self):
-        config = self._config
-
-        style = config.section('style')
-        style['theme'] = self.theme_combo.currentText()
-        style['syntax'] = self.syntax_combo.currentText()
+        # styles
+        sct = cfg.section('style')
+        sct['theme'] = self.theme_combo.currentText()
+        sct['syntax'] = self.syntax_combo.currentText()
 
         font = self.font_combo.currentFont()
         font.setPointSize(self.font_size_box.value())
-        style['font'] = font
-
-        self.set_theme()
-        self.set_syntax_style()
-        self.set_font()
-
-        config.write()
+        sct['font'] = font
 
-    ## styles ##
+        # startup
+        sct = cfg.section('startup')
+        sct['show_tips'] = self.tips_checkbox.isChecked()
+
+        cfg.write()
+
+    def read_config(self):
+        cfg = self._config
+        cfg.read()
+
+        win = self._window
+
+        self._reading = True
+        try:
+            # theme
+            name = cfg['style.theme']
+            app = QtWidgets.QApplication.instance()
+
+            if name in ('dark', 'light'):
+                stylesheet = styles.get_theme_stylesheet(name)
+            else:
+                stylesheet = ''
+                if not app.setStyle(name):
+                    log.error('unknown theme: %s', name)
+
+            app.setStyleSheet(stylesheet)
+            win.output_edit.highlighter.rehighlight()
+            win.source_edit.highlighter.rehighlight()
 
-    def set_theme(self):
-        name = self._config['style.theme']
-        app = QtWidgets.QApplication.instance()
-
-        if name in ('dark', 'light'):
-            stylesheet = styles.get_theme_stylesheet(name)
-        else:
-            stylesheet = ''
-            if not app.setStyle(name):
-                log.error('unknown theme: %s', name)
-
-        app.setStyleSheet(stylesheet)
-        self._window.output_edit.highlighter.rehighlight()
-        self._window.source_edit.highlighter.rehighlight()
-
-        with utils.block_signals(self.theme_combo):
             self.theme_combo.setCurrentText(name)
 
-    def set_syntax_style(self):
-        name = self._config['style.syntax']
-        style = styles.get_style(name)
+            # syntax
+            name = cfg['style.syntax']
+            style = styles.get_style(name)
 
-        self._window.output_edit.set_style(style)
-        self._window.source_edit.set_style(style)
+            win.output_edit.set_style(style)
+            win.source_edit.set_style(style)
 
-        with utils.block_signals(self.syntax_combo):
             self.syntax_combo.setCurrentText(name)
 
-    def set_font(self):
-        font = self._config['style.font']
+            # font
+            font = cfg['style.font']
 
-        self._window.output_edit.setFont(font)
-        self._window.source_edit.setFont(font)
+            win.output_edit.setFont(font)
+            win.source_edit.setFont(font)
 
-        with utils.block_signals(self.font_combo):
             self.font_combo.setCurrentFont(font)
             self.font_size_box.setValue(font.pointSize())
+
+            # startup
+            sct = cfg.section('startup')
+            self.tips_checkbox.setChecked(sct['show_tips'])
+
+            # window
+            sct = cfg.section('window')
+
+            view_menu = sct['view.menu']
+            win.menuBar().setVisible(view_menu)
+            win.action_toggle_menu.setChecked(view_menu)
+
+            win.action_toggle_source_title.setChecked(False)
+
+            if not utils.is_i3():
+                win.resize(*sct['size'])
+        finally:
+            self._reading = False
```

## telepythy/gui/source.py

```diff
@@ -1,13 +1,14 @@
 import re
 import contextlib
 
 from qtpy.QtCore import Qt
 from qtpy import QtCore, QtGui, QtWidgets
 
+from . import lexer
 from . import textedit
 from .history import History
 
 COMPLETER_KEYS = frozenset([
     Qt.Key_Return, Qt.Key_Enter, Qt.Key_Escape, Qt.Key_Tab, Qt.Key_Backtab])
 
 _rx_context = re.compile(r'[_A-Za-z0-9.()"\'\[\]]+$')
@@ -16,26 +17,26 @@
     return (match and match.group()) or ''
 
 class SourceEdit(textedit.TextEdit):
     evaluation_requested = QtCore.Signal(str)
     completion_requested = QtCore.Signal(str)
 
     def __init__(self, parent=None):
-        super().__init__(parent)
+        super().__init__(lexer.Lexer(), parent)
 
         self._history = History()
         # keep track of the last text entered by the user
         self._user_source = None
 
-        self.setLineWrapMode(self.NoWrap)
+        self.setLineWrapMode(self.LineWrapMode.NoWrap)
 
         self.completer_model = QtGui.QStandardItemModel()
         self.completer = QtWidgets.QCompleter(self.completer_model, self)
         self.completer.setWidget(self)
-        self.completer.setCompletionMode(self.completer.PopupCompletion)
+        self.completer.setCompletionMode(self.completer.CompletionMode.PopupCompletion)
         self.completer.activated[str].connect(self.complete)
 
         self.textChanged.connect(self.refresh_completer)
 
     def show_completer(self, matches):
         if not matches:
             return
@@ -89,15 +90,15 @@
         text = match[len(ident):]
 
         self.insertPlainText(text)
         self.completer_model.clear()
 
     def completion_context(self):
         cur = self.textCursor()
-        cur.movePosition(cur.StartOfLine, cur.KeepAnchor)
+        cur.movePosition(cur.MoveOperation.StartOfLine, cur.MoveMode.KeepAnchor)
         sel = cur.selectedText()
 
         return get_completion_context(sel)
 
     def history_previous(self):
         """Loads previous history state."""
         if not self._history:
@@ -134,18 +135,20 @@
         """Overridden to prevent clearing undo history."""
         self.clear()
         self.insertPlainText(text)
 
     def clear(self):
         """Clears source edit."""
         cur = self.textCursor()
-        cur.movePosition(cur.Start)
-        cur.movePosition(cur.End, cur.KeepAnchor)
+        cur.movePosition(cur.MoveOperation.Start)
+        cur.movePosition(cur.MoveOperation.End, cur.MoveMode.KeepAnchor)
         cur.deleteChar()
 
+        self.highlighter.reset()
+
     def next_cell(self):
         self.history_reset()
 
         source = self.toPlainText()
         self._history.append(source)
 
         self.clear()
@@ -225,16 +228,16 @@
             self.history_next()
             return
 
         elif key == Qt.Key_Backspace:
             cursor = self.textCursor()
             text = cursor.block().text()[:cursor.positionInBlock()]
             if text.startswith(' ') and not text.strip(' '):
-                cursor.movePosition(cursor.PreviousCharacter,
-                    cursor.KeepAnchor, 4)
+                cursor.movePosition(cursor.MoveOperation.PreviousCharacter,
+                    cursor.MoveMode.KeepAnchor, 4)
                 cursor.deleteChar()
                 return
 
         if not Qt.Key_Home <= key <= Qt.Key_ScrollLock:
             # only reset for non-navigation keys
             self.history_reset()
 
@@ -267,15 +270,15 @@
             for block in self.selected_blocks():
                 block_indent = doc.block_indentation(block)
                 offset = block_indent % indent
 
                 cur.setPosition(block.position() + block_indent)
                 # don't go past the beginning of the line
                 n = min(cur.columnNumber(), indent - offset)
-                cur.movePosition(cur.PreviousCharacter, cur.KeepAnchor, n)
+                cur.movePosition(cur.MoveOperation.PreviousCharacter, cur.MoveMode.KeepAnchor, n)
                 cur.removeSelectedText()
 
     def move_cursor(self, position):
         cursor = self.textCursor()
         cursor.movePosition(position)
         self.setTextCursor(cursor)
```

## telepythy/gui/textedit.py

```diff
@@ -5,21 +5,21 @@
 from .highlighter import Highlighter
 
 DEFAULT_STYLESHEET = 'QPlainTextEdit:focus { border: none; }'
 
 class TextEdit(QtWidgets.QPlainTextEdit):
     interrupt_requested = QtCore.Signal()
 
-    def __init__(self, lexer=None, parent=None):
+    def __init__(self, lexer, parent=None):
         super().__init__(parent)
 
         doc = document.TextDocument(self)
         self.setDocument(doc)
 
-        self.highlighter = Highlighter(doc, lexer)
+        self.highlighter = Highlighter(lexer, doc)
 
         self.setWordWrapMode(QtGui.QTextOption.WrapAnywhere)
         self.setStyleSheet(DEFAULT_STYLESHEET)
 
     def set_style(self, style):
         self.highlighter.set_style(style)
```

## telepythy/gui/utils.py

```diff
@@ -1,13 +1,12 @@
 import os
 import sys
 import glob
 import signal
 import traceback
-import contextlib
 
 from qtpy import QtCore, QtWidgets
 
 from ..lib import logs
 
 IS_WINDOWS = sys.platform == 'win32'
 
@@ -48,22 +47,14 @@
         result = super().resizeEvent(event)
 
         txt = self.findChild(QtWidgets.QTextEdit)
         txt.setFixedSize(txt.sizeHint())
 
         return result
 
-@contextlib.contextmanager
-def block_signals(widget):
-    widget.blockSignals(True)
-    try:
-        yield
-    finally:
-        widget.blockSignals(False)
-
 def virtualenvs(home_path=None):
     home_path = home_path or os.path.expanduser('~')
     venv_path = os.path.join(home_path, '.virtualenvs')
 
     get_name = lambda p: os.path.basename(os.path.dirname(os.path.dirname(p)))
 
     # linux
@@ -80,14 +71,17 @@
     timer()
 
 def get_interrupt_handler(win):
     def handler(signum, frame):
         win.close()
     return handler
 
+def is_i3():
+    return 'I3SOCK' in os.environ
+
 if IS_WINDOWS:
     import ctypes as ct
     from ctypes import wintypes as wt
 
     def set_app_id():
         res = SetCurrentProcessExplicitAppUserModelID(APPID)
         if res != S_OK:
```

## telepythy/gui/window.py

```diff
@@ -6,23 +6,25 @@
 from ..lib import logs
 from ..lib import start_server
 
 from .about import AboutDialog
 from .source import SourceEdit
 from .output import OutputEdit
 from .settings import SettingsWidget
+from . import tips
 
 # required to make resources available
 from . import resources_rc
 
 log = logs.get(__name__)
 
 class Window(QtWidgets.QMainWindow):
     output_started = QtCore.Signal(str)
     output_stopped = QtCore.Signal()
+    error_received = QtCore.Signal(str)
     stdout_received = QtCore.Signal(str)
     stderr_received = QtCore.Signal(str)
     completion_received = QtCore.Signal(list)
     status_connected = QtCore.Signal(tuple)
     status_disconnected = QtCore.Signal(str)
 
     def __init__(self, config, profile, profiles, debug=False):
@@ -57,23 +59,23 @@
         self.setup_output_edit()
         self.setup_source_edit()
         self.setup_settings_widget()
         self.setup_menus()
         self.setup_statusbar()
         self.setup_signals()
 
-        self.settings.from_config()
+        self.settings.read_config()
 
         self.source_edit.setFocus()
 
     def setup_palette(self):
         # set default link color to something a little more light/dark friendly
         app = QtWidgets.QApplication.instance()
         pal = app.palette()
-        pal.setColor(pal.Link, 'cadetblue')
+        pal.setColor(pal.ColorRole.Link, 'cadetblue')
         app.setPalette(pal)
 
     def setup_actions(self):
         self.action_about = QtWidgets.QAction('About')
         self.addAction(self.action_about)
 
         self.action_quit = QtWidgets.QAction('Quit')
@@ -251,32 +253,77 @@
         self.output_edit.interrupt_requested.connect(self.interrupt)
 
         self.source_edit.evaluation_requested.connect(self.evaluate)
         self.source_edit.completion_requested.connect(self.complete)
 
         self.output_started.connect(self.start_session)
         self.output_stopped.connect(self.output_edit.append_prompt)
+        self.error_received.connect(self.output_edit.append_error)
         self.stdout_received.connect(self.output_edit.append)
         self.stderr_received.connect(self.output_edit.append)
 
         self.completion_received.connect(self.source_edit.show_completer)
 
         self.status_connected.connect(self._set_connected)
         self.status_disconnected.connect(self._set_disconnected)
 
     ## events ##
 
+    def showEvent(self, event):
+        if self._config['startup.show_tips']:
+            # slight delay allows main window to pop up
+            QtCore.QTimer.singleShot(1, self.show_tips)
+
     def contextMenuEvent(self, event):
         self.view_menu.exec_(event.globalPos())
 
     def closeEvent(self, event):
         self._control.stop()
 
     ## actions ##
 
+    def show_tips(self):
+        def next_tip():
+            edit.clear()
+            edit.appendHtml(tips.get())
+
+        box = QtWidgets.QDialog(self)
+        box.setWindowTitle('Tips')
+
+        layout = QtWidgets.QVBoxLayout()
+        box.setLayout(layout)
+
+        edit = QtWidgets.QPlainTextEdit()
+        edit.setReadOnly(True)
+        layout.addWidget(edit)
+
+        button_layout = QtWidgets.QHBoxLayout()
+        layout.addLayout(button_layout)
+
+        checkbox = QtWidgets.QCheckBox()
+        checkbox.setText('Do not show again')
+        def toggle_tips(state):
+            self._config['startup.show_tips'] = state == Qt.Unchecked.value
+            self._config.write()
+        checkbox.stateChanged.connect(toggle_tips)
+        button_layout.addWidget(checkbox)
+
+        buttons = QtWidgets.QDialogButtonBox()
+
+        buttons.addButton(buttons.StandardButton.Ok)
+        buttons.accepted.connect(box.accept)
+
+        next_button = buttons.addButton('Next', buttons.ButtonRole.ActionRole)
+        next_button.clicked.connect(next_tip)
+
+        button_layout.addWidget(buttons)
+
+        next_tip()
+        box.show()
+
     def set_profile(self, name):
         if self._control:
             self._control.stop()
             self._control = None
         self._set_disconnected(force=True)
 
         self._control = ctl = self._profiles.get_control(name)
@@ -284,14 +331,19 @@
         ctl.register(None, lambda address: self.status_connected.emit(address))
         def start(event):
             version = event['data']['version']
             self.output_started.emit(version)
         ctl.register('start', start)
         ctl.register('done', lambda _: self.output_stopped.emit())
 
+        def error(event):
+            text = event['data']['text']
+            self.error_received.emit(text)
+        ctl.register('error', error)
+
         def stdout(event):
             text = event['data']['text']
             self.stdout_received.emit(text)
         ctl.register('stdout', stdout)
 
         def stderr(event):
             text = event['data']['text']
@@ -299,18 +351,18 @@
         ctl.register('stderr', stderr)
 
         def completion(event):
             matches = event['data']['matches']
             self.completion_received.emit(matches)
         ctl.register('completion', completion)
 
-        def error(err):
+        def exception(err):
             log.debug('totally normal events error: %s', err)
             self.status_disconnected.emit(err)
-        ctl.register('error', error)
+        ctl.register('exception', exception)
 
         ctl.start()
 
         self.profile_button.setText(name)
 
         self._profile = name
```

## telepythy/lib/service.py

```diff
@@ -92,15 +92,15 @@
         return self._inter.locals
 
     def evaluate(self, source, notify=True):
         self._is_evaluating = True
         try:
             self._inter.evaluate(source)
         except (Exception, KeyboardInterrupt):
-            traceback.print_exc()
+            self.add_event('error', text=traceback.format_exc())
         finally:
             self._is_evaluating = False
             if notify:
                 self.add_event('done')
 
     def interrupt(self):
         if self._is_evaluating:
@@ -123,14 +123,18 @@
         else:
             log.debug('evt: %s%s', name, (data or '') and ': ' + repr(data))
 
         event = {'evt': name, 'data': data}
         self._events.put(event)
 
     def register_event_handler(self, handler):
+        """Registers a handler for an external event loop.
+
+        The handler will be called once for every loop in the telepythy event
+        handler."""
         self._event_handlers.append(handler)
 
     def _handle(self, sock):
         self._stop.clear()
 
         self.add_event('start', version=sys.version)
```

## Comparing `telepythy-0.5.1.dist-info/METADATA` & `telepythy-0.5.2.dist-info/METADATA`

 * *Files 4% similar despite different names*

```diff
@@ -1,33 +1,33 @@
 Metadata-Version: 2.1
 Name: telepythy
-Version: 0.5.1
+Version: 0.5.2
 Summary: An embeddable, remote-capable Python shell
 Home-page: https://github.com/dhagrow/telepythy
 Author: Miguel Turner
 Author-email: cymrow@gmail.com
 License: MIT
-Platform: UNKNOWN
 Classifier: Development Status :: 4 - Beta
 Classifier: Intended Audience :: Developers
 Classifier: License :: OSI Approved :: MIT License
 Classifier: Programming Language :: Python :: 2
 Classifier: Programming Language :: Python :: 3
 Classifier: Operating System :: OS Independent
 Classifier: Topic :: Software Development :: Interpreters
 Classifier: Topic :: Utilities
 Description-Content-Type: text/markdown
-Requires-Dist: appdirs (>=1.4.4)
-Requires-Dist: colorlog (>=6.6.0)
-Requires-Dist: Pygments (>=2.12.0)
-Requires-Dist: pyqtdarktheme (>=1.1.0)
-Requires-Dist: PySide6-Essentials (>=6.3.0)
-Requires-Dist: QtPy (>=2.1.0)
-Requires-Dist: shiboken6 (>=6.3.0)
-Requires-Dist: snekcfg (>=0.1.0)
+Requires-Dist: colorlog (>=6.7.0)
+Requires-Dist: mistune (>=3.0.1)
+Requires-Dist: platformdirs (>=3.9.1)
+Requires-Dist: Pygments (>=2.15.1)
+Requires-Dist: pyqtdarktheme (>=2.1.0)
+Requires-Dist: PySide6-Essentials (>=6.5.2)
+Requires-Dist: QtPy (>=2.3.1)
+Requires-Dist: shiboken6 (>=6.5.2)
+Requires-Dist: snekcfg (>=0.1.1)
 
 # Telepythy
 
 Telepythy is a desktop Python shell inspired by [DreamPie][1] with some notable additional features, such as remote interpreters. It is designed to streamline a prototyping workflow.
 
 ## Features
 
@@ -84,15 +84,15 @@
 
 ```shell
 $ pipx install telepythy
 ```
 
 This will install **Telepythy** in an isolated environment for the current user, and should work on Windows, Linux, and OSX (untested).
 
-# For Windows users, you can download an installer [here]
+For Windows users, you can download an installer [here][13].
 
 ## Usage
 
 Once **Telepythy** and its dependencies have been installed, you can start the UI with:
 
 ```shell
 $ telepythy-gui
@@ -102,15 +102,15 @@
 
 **NOTE**: At this early state, it may be helpful to use the `--verbose` (`-v` or `-vv`) flag to track what **Telepythy** is doing (especially if reporting a bug).
 
 ### Configuration
 
 Style and font options can be configured with the UI. Manually editing the config file is currently the only way to persist any other options.
 
-The config file is located according to the results of `appdirs.user_config_dir()` (e.g. `~/.config/telepythy/telepythy.cfg` on Linux, `C:\Users\<username>\AppData\Local\telepythy\telepythy.cfg` on Windows).
+The config file is located according to the results of `platformdirs.user_config_dir()` (e.g. `~/.config/telepythy/telepythy.cfg` on Linux, `C:\Users\<username>\AppData\Local\telepythy\telepythy.cfg` on Windows).
 
 ### Virtual Environments
 
 Any virtual environments discovered in `~/.virtualenvs` will be accessible automatically in the *Profiles* menu.
 
 ### Embedding
 
@@ -215,9 +215,8 @@
 [6]: https://help.ubuntu.com/community/SSH/OpenSSH/PortForwarding
 [7]: https://pygments.org
 [8]: https://www.qt.io
 [9]: https://pypa.github.io/pipx/
 [10]: https://bpython-interpreter.org
 [11]: https://github.com/prompt-toolkit/ptpython
 [12]: https://docs.python.org/3/library/idle.html
-
-
+[13]: https://github.com/dhagrow/telepythy/releases/download/0.5.1/telepythy-0.5.1-setup-x64.exe
```

## Comparing `telepythy-0.5.1.dist-info/RECORD` & `telepythy-0.5.2.dist-info/RECORD`

 * *Files 11% similar despite different names*

```diff
@@ -1,34 +1,35 @@
-telepythy/__init__.py,sha256=ZxD3q5wQczg_p7oKZcci-Vf3sDdLx_UUaL_baHeuXsw,83
+telepythy/__init__.py,sha256=fEHBeOWNbMYPJfNryovFUWkI9AzZP4xHlJh_td1boA4,83
 telepythy/__main__.py,sha256=5nvnx-6oBdysEK4BXUezENzHSlDu_PSASIsyPaHOJCY,68
 telepythy/pack.py,sha256=gBdKZQL4Q9D82EYjxnIUWBdQkUKHjq5MQlVpgPW5-iQ,1578
-telepythy/telepythy_service.pyz,sha256=6gN1pHzzie2KPqWzBEC7lF6b9c1V8_IHvLE02V3G1Zw,10985
-telepythy/gui/__main__.py,sha256=c20HeHptt9WxN63NeXsbJFqFN1BdAlG0oMqsKXVq1M8,2355
-telepythy/gui/about.py,sha256=0KBnJ-wYbfldHiaJYuAYhMzersGaJLSY95Q6jDmDg1Q,1866
-telepythy/gui/config.py,sha256=Mz2Wmfp98pGGtbVFDtc2e3cdjAnec8QdlWYuqUmiE5g,1788
-telepythy/gui/control.py,sha256=EZTglVJNCV7VQQH_avxt_urnwJXFFKqcVb9_j8YZgWg,6875
+telepythy/telepythy_service.pyz,sha256=KSPeHpRFMJsonAhiotaTIlAD6agNISJyzmwJWm926M8,11067
+telepythy/gui/__main__.py,sha256=UMBL0pydLHe30wnVONWgibmOt9CQdmdxsIKkT7Biau0,2188
+telepythy/gui/about.py,sha256=PW-iTZ8zR4cR4UH8LATYcDQGk437eXuPyh4L87w8FaU,1901
+telepythy/gui/config.py,sha256=GjZw4DU0aJUNo0yVkVpU4yO_chMP_HI6faehEnwArOM,1857
+telepythy/gui/control.py,sha256=mROfzqOB7csFz1oXtGZxUoDVhDt1-pDx3LnXurUAEHg,6883
 telepythy/gui/document.py,sha256=C0Zdl5yDlNcZixuAzb_C4lbT838vq9uHLeZ6YtsyU84,1567
-telepythy/gui/highlighter.py,sha256=HoId7OT7qkWeyJLWVQ49Ch53KKIXtFTsMqAwSodqMtA,7379
+telepythy/gui/highlighter.py,sha256=gStF3lh9-N9EiaWxYVDOxRnbuQdl60G5IUDifGyFE6Q,4588
 telepythy/gui/history.py,sha256=MvWdMjxX2EXtvq-EYosdd6dHsPns_IgIb2XXjXE1UBA,1460
-telepythy/gui/output.py,sha256=xUU6katporhMLOkowop0SaVEg06iDnNYLW2LF9WouZ4,10574
+telepythy/gui/lexer.py,sha256=Pt74qv-ZruGkpcaS6avUYLRUQXC9wvK7uKxQBgOBjww,5805
+telepythy/gui/output.py,sha256=fXglf8oNUoRT42c9V7dAnU2H4HOgisSdJ6XRnC7uplE,10693
 telepythy/gui/profiles.py,sha256=Z3JFDrdUSEgciFYwxpQ0Fqsj0EDLmrQo0ThyA-RUuXg,1454
-telepythy/gui/resources_rc.py,sha256=W57VbISSgbRLbgBc9OLT9IPva7AvJdFAO-0o4AFuEGw,41607
-telepythy/gui/settings.py,sha256=2cjUMfOV7cqDDBZ3P2feYO3iu0lojoE35oQVriJmh3Q,4254
-telepythy/gui/source.py,sha256=cfjYtHD19SXOXg0yR1302DoKxtjWZ6IxaSI8tuTjh5w,8700
+telepythy/gui/resources_rc.py,sha256=xwlTfbVnE-UpGoKPeRkbrY6SVxT7E8L5890BDVD9QVQ,41559
+telepythy/gui/settings.py,sha256=xanHbWdKL01mhi8_7CMJvcP_X7DwJNkyPmNUUTG8sUI,4902
+telepythy/gui/source.py,sha256=cexMLRGrGI1E3xhsZUgWs0otoEXDW6HZUOkZiSbhieE,8903
 telepythy/gui/styles.py,sha256=TOJzXwtbK8ppIazlOBLSI0TUhSlOdV7wtZDsWsCQpnA,3112
-telepythy/gui/syntaxhighlighters.py,sha256=VglCXiO5D7B4naryCVFtNWlttYV06YhNKJOUqevypn0,84163
-telepythy/gui/textedit.py,sha256=LG3ZiC8meqrlIziE6NhYtpQ-NDo_QgIIx3BvXZDYd-A,1492
-telepythy/gui/utils.py,sha256=rcWm5mXT_HqP7xtcQxFSItl_L0F6uZlQAQrDAE-4IaU,2748
-telepythy/gui/window.py,sha256=uNl6D9YZzLegx_SHDDNkvtV5AKJDgeGrgXo0iMBcLV8,13375
+telepythy/gui/textedit.py,sha256=fE0s5yN6pe9-Eh0ptbBdr-xcoDN9ApuhuSeMFdoC7KQ,1487
+telepythy/gui/tips.py,sha256=2lo8dom3qGMW4EQ74i0uu5Hv4iQu3nag007B1brg1I0,1790
+telepythy/gui/utils.py,sha256=NTHQgdSyoICeBmaohNc5sxSOFzyKnLZe7yl8cZ1bMn4,2622
+telepythy/gui/window.py,sha256=uTTsmHUc3CprKIeIQ-lVqiIhHKDtG_WD66xRnvJdIXk,14993
 telepythy/lib/__init__.py,sha256=n3iID_xJljHbfHZrBvgSDsy2wHYP8-MijclLVrWW6HQ,1683
 telepythy/lib/__main__.py,sha256=tZZylDnZfPsh9aZhYWe8cwASVXBg9aVtUmwAFLkdfJs,1626
 telepythy/lib/event_handlers.py,sha256=fU0wuKgoitApwCPhSIbEjeZiO0_rpovQF41LtLvukqo,555
 telepythy/lib/interpreter.py,sha256=0I9k1Ef_dYMz56IBfzqI4tT6RVcOUMWcMIqqhCG5j-I,6220
 telepythy/lib/logs.py,sha256=rEWPgZhS8Td7TrXtsStR__sIrVBNxAFYCqr0dm90VBg,2281
-telepythy/lib/service.py,sha256=J-yYbidY7g_fWMLmNrFROvn55hgo6b33m5jV0ktc0qs,6177
+telepythy/lib/service.py,sha256=UF07KloFM2UkK3qQswqKrbOILW173syCKLJ9UWNRPto,6366
 telepythy/lib/sockio.py,sha256=2drC4igp1p4SjQ_JFAx4focXKatAaQ8IsPNPDPe_YdM,4075
 telepythy/lib/utils.py,sha256=td3IoRo9Noi3qhfNOe9bPHWlTvSv-u5PtrT8LtvktN0,3008
-telepythy-0.5.1.dist-info/METADATA,sha256=7rzf_huZkn1YkOFSZYQ4hy0d2c8MFKYciOE2Kt44qak,7789
-telepythy-0.5.1.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
-telepythy-0.5.1.dist-info/entry_points.txt,sha256=vzIqr3z_0nqqlm3nRELtfQMOoki0ME1DqZPXRWRpMRA,120
-telepythy-0.5.1.dist-info/top_level.txt,sha256=6XbKL9GyhkHLMrFyZxxcjwj6anizJl9n7_B30ge1ZZs,10
-telepythy-0.5.1.dist-info/RECORD,,
+telepythy-0.5.2.dist-info/METADATA,sha256=vuyyGtXqFGeD_Z9-dVuEZDMXUVeehEddKa6bk2kBHck,7912
+telepythy-0.5.2.dist-info/WHEEL,sha256=AtBG6SXL3KF_v0NxLf0ehyVOh0cold-JbJYXNGorC6Q,92
+telepythy-0.5.2.dist-info/entry_points.txt,sha256=oSLXEgW3U8TRICgabkSZeJa1_KYowOfmzLp810XLY1Y,119
+telepythy-0.5.2.dist-info/top_level.txt,sha256=6XbKL9GyhkHLMrFyZxxcjwj6anizJl9n7_B30ge1ZZs,10
+telepythy-0.5.2.dist-info/RECORD,,
```

